# 설치 가이드

## 개요

이 가이드는 Reia Python 3.14 프로젝트를 설치하고 설정하는 방법을 단계별로 안내합니다.

## 목차

1. [시스템 요구사항](#시스템-요구사항)
2. [Python 설치](#python-설치)
3. [프로젝트 설치](#프로젝트-설치)
4. [개발 환경 설정](#개발-환경-설정)
5. [Godot 통합](#godot-통합)
6. [문제 해결](#문제-해결)

---

## 시스템 요구사항

### 최소 요구사항

- **운영체제**: Windows 10+, macOS 10.15+, Linux (Ubuntu 20.04+)
- **Python**: 3.14 이상
- **RAM**: 4GB 이상
- **디스크 공간**: 500MB 이상

### 권장 요구사항

- **RAM**: 8GB 이상
- **디스크 공간**: 2GB 이상
- **Godot**: 4.x 버전

---

## Python 설치

### Python 3.14 설치 확인

```bash
python --version
```

Python 3.14 이상이어야 합니다.

### Python 3.14 설치

#### Windows

1. [python.org](https://www.python.org/downloads/)에서 Python 3.14 다운로드
2. 설치 프로그램 실행
3. "Add Python to PATH" 옵션 선택
4. "Install Now" 클릭

#### macOS

```bash
# Homebrew 사용
brew install python@3.14
```

#### Linux (Ubuntu/Debian)

```bash
# deadsnakes PPA 추가
sudo add-apt-repository ppa:deadsnakes/ppa
sudo apt update

# Python 3.14 설치
sudo apt install python3.14 python3.14-venv python3.14-dev
```

### pip 설치 확인

```bash
pip --version
```

---

## 프로젝트 설치

### 1. 저장소 클론

```bash
git clone https://github.com/eightynine01/Reia.git
cd Reia/python
```

### 2. 가상 환경 생성 (권장)

#### Windows

```bash
python -m venv venv
venv\Scripts\activate
```

#### macOS/Linux

```bash
python3.14 -m venv venv
source venv/bin/activate
```

### 3. 의존성 설치

#### 기본 설치

```bash
pip install -r requirements.txt
```

#### 개발 모드 설치

```bash
pip install -e ".[dev]"
```

이렇게 하면 다음이 설치됩니다:
- pytest (테스트)
- pytest-asyncio (비동기 테스트)
- mypy (타입 체크)
- black (코드 포매팅)
- ruff (린팅)

### 4. 설치 확인

```bash
python -c "import src; print('설치 성공!')"
```

---

## 개발 환경 설정

### IDE 설정

#### VS Code

1. **Python 확장 설치**
   - Python (Microsoft)
   - Pylance

2. **설정 파일 생성** (`.vscode/settings.json`):

```json
{
    "python.defaultInterpreterPath": "${workspaceFolder}/venv/bin/python",
    "python.linting.enabled": true,
    "python.linting.mypyEnabled": true,
    "python.formatting.provider": "black",
    "python.formatting.blackArgs": ["--line-length", "100"],
    "editor.formatOnSave": true,
    "python.testing.pytestEnabled": true,
    "python.testing.unittestEnabled": false
}
```

#### PyCharm

1. **인터프리터 설정**
   - File → Settings → Project → Python Interpreter
   - 가상 환경 선택

2. **코드 스타일 설정**
   - File → Settings → Editor → Code Style → Python
   - Line length: 100

### Git 훅 설정 (선택사항)

#### pre-commit 설치

```bash
pip install pre-commit
pre-commit install
```

#### `.pre-commit-config.yaml` 생성:

```yaml
repos:
  - repo: https://github.com/psf/black
    rev: 24.0.0
    hooks:
      - id: black
        language_version: python3.14

  - repo: https://github.com/charliermarsh/ruff-pre-commit
    rev: v0.1.0
    hooks:
      - id: ruff
        args: [--fix]

  - repo: https://github.com/pre-commit/mirrors-mypy
    rev: v1.8.0
    hooks:
      - id: mypy
        additional_dependencies: [types-all]
```

---

## Godot 통합

### Godot 4.x 설치

1. [godotengine.org](https://godotengine.org/download)에서 Godot 4.x 다운로드
2. 설치 및 실행

### Python 바인딩 설정 (개발 중)

> **참고**: godot-python 바인딩은 현재 개발 중입니다.

미래 단계:

1. **godot-python 설치**:
   ```bash
   pip install godot-python
   ```

2. **Godot 프로젝트 설정**:
   - Project → Project Settings → Plugins
   - Python 플러그인 활성화

3. **스크립트 연결**:
   ```gdscript
   extends Node

   func _ready():
       var python = load("res://python/src/__init__.py")
       python.initialize_extension()
   ```

---

## 테스트 실행

### 모든 테스트 실행

```bash
pytest
```

### 특정 테스트 파일 실행

```bash
pytest tests/test_combat.py
```

### 커버리지와 함께 실행

```bash
pytest --cov=src --cov-report=html
```

커버리지 보고서는 `htmlcov/index.html`에서 확인할 수 있습니다.

### 상세 출력

```bash
pytest -v
```

---

## 코드 품질 도구

### Black (코드 포매팅)

```bash
# 전체 프로젝트 포맷
black src/

# 변경 사항 확인 (적용하지 않음)
black --check src/

# 특정 파일 포맷
black src/game/components/combat.py
```

### Ruff (린팅)

```bash
# 린트 검사
ruff check src/

# 자동 수정
ruff check --fix src/

# 특정 파일 검사
ruff check src/game/components/combat.py
```

### Mypy (타입 체크)

```bash
# 전체 프로젝트 타입 체크
mypy src/

# 특정 파일 타입 체크
mypy src/game/components/combat.py

# 엄격 모드
mypy --strict src/
```

---

## 빌드 및 배포

### 패키지 빌드

```bash
# build 도구 설치
pip install build

# 패키지 빌드
python -m build
```

빌드된 파일은 `dist/` 디렉토리에 생성됩니다.

### 로컬 설치

```bash
pip install dist/reia-0.1.0-py3-none-any.whl
```

### 편집 가능 모드로 설치

```bash
pip install -e .
```

---

## 문제 해결

### Python 버전 문제

**증상**: "Python 3.14가 필요합니다"

**해결**:
```bash
# Python 버전 확인
python --version

# 특정 버전 사용
python3.14 -m venv venv
```

### 의존성 설치 실패

**증상**: pip 설치 중 오류

**해결**:
```bash
# pip 업그레이드
pip install --upgrade pip

# 캐시 클리어 후 재설치
pip cache purge
pip install -r requirements.txt
```

### 가상 환경 활성화 실패

**Windows (PowerShell 실행 정책 오류)**:
```powershell
Set-ExecutionPolicy -ExecutionPolicy RemoteSigned -Scope CurrentUser
```

**Linux/macOS (권한 문제)**:
```bash
chmod +x venv/bin/activate
source venv/bin/activate
```

### 모듈을 찾을 수 없음

**증상**: `ModuleNotFoundError: No module named 'src'`

**해결**:
```bash
# 편집 가능 모드로 설치
pip install -e .

# 또는 PYTHONPATH 설정
export PYTHONPATH="${PYTHONPATH}:$(pwd)/src"
```

### Godot 통합 문제

**증상**: Godot에서 Python 스크립트를 찾을 수 없음

**해결**:
1. Python 경로가 올바른지 확인
2. Godot 프로젝트 설정에서 Python 플러그인 활성화 확인
3. Godot 재시작

### 테스트 실패

**증상**: pytest에서 테스트 실패

**해결**:
```bash
# 의존성 재설치
pip install -e ".[dev]"

# pytest 캐시 클리어
pytest --cache-clear

# 상세 출력으로 실행
pytest -vv
```

---

## 성능 최적화

### PyPy 사용 (선택사항)

더 나은 성능을 위해 PyPy를 사용할 수 있습니다:

```bash
# PyPy 설치
# https://www.pypy.org/download.html

# PyPy로 가상 환경 생성
pypy3 -m venv venv-pypy
source venv-pypy/bin/activate

# 의존성 설치
pip install -r requirements.txt
```

### Cython 컴파일 (선택사항)

성능 중요 모듈을 Cython으로 컴파일:

```bash
# Cython 설치
pip install cython

# setup.py에서 확장 설정 후 빌드
python setup.py build_ext --inplace
```

---

## 다음 단계

설치가 완료되었습니다! 이제 다음을 확인하세요:

1. [API 문서](./API_문서.md) - API 레퍼런스
2. [프로젝트 개요](./README.md) - 사용 가이드
3. [변환 요약](./변환_요약.md) - 기술 세부사항

---

## 추가 리소스

- [Python 공식 문서](https://docs.python.org/3.14/)
- [Godot 공식 문서](https://docs.godotengine.org/)
- [pytest 문서](https://docs.pytest.org/)
- [mypy 문서](https://mypy.readthedocs.io/)

---

## 지원

문제가 발생하면:

1. 이 가이드의 [문제 해결](#문제-해결) 섹션 확인
2. GitHub Issues에서 유사한 문제 검색
3. 새로운 이슈 생성

---

**설치 완료를 축하합니다!** 🎉
